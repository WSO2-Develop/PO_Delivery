<?xml version="1.0" encoding="UTF-8"?>
<proxy xmlns="http://ws.apache.org/ns/synapse"
       name="transportEDI"
       transports="vfs"
       startOnLoad="true"
       trace="disable">
   <description/>
   <target>
      <inSequence>
         <log level="custom">
            <property name="INICIO        "
                      value="   ----------  INICIO TRANSFORMACION  ----------"/>
         </log>
         <log level="custom">
            <property name="RECEPCION     "
                      value="   --------- Recepcion  archivo UNEDI ----------"/>
         </log>
         <header xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"
                 name="soapenv:Envelope"
                 scope="default"
                 action="remove"/>
         <log/>
         <xslt key="xsltUNEDI"/>
         <log level="full"/>
         <property name="DISABLE_SMOOKS_RESULT_PAYLOAD"
                   value="true"
                   scope="default"
                   type="STRING"/>
         <smooks config-key="smooksEDI96">
            <input type="text"/>
            <output type="xml"/>
         </smooks>
         <log level="custom">
            <property name="TRANSFORMACION"
                      value="   --------- Transformando UNEDI EDI ----------"/>
         </log>
         <sequence key="fileWrite_XML"/>
         <log level="custom">
            <property name="FINALIZACION  "
                      value="   ---------- TRANSFORMACION  EXITOSA ----------"/>
         </log>
      </inSequence>
      <outSequence>
         <log level="custom">
            <property name="RESPUESTA     "
                      value="   ----------     Respuesta de WSO2   ----------"/>
         </log>
         <log level="full"/>
         <log level="custom">
            <property name="FINALIZACION  "
                      value="   ---------- TRANSFORMACION  EXITOSA ----------"/>
         </log>
      </outSequence>
      <faultSequence>
         <log level="custom">
            <property name="RESPUESTA     "
                      value="   ---------- Error de Transformacion ----------"/>
         </log>
         <log level="full"/>
         <log level="custom">
            <property name="FINALIZACION  "
                      value="   ---------- TRANSFORMACION  ERRONEA ----------"/>
         </log>
      </faultSequence>
   </target>
   <parameter name="transport.PollInterval">5</parameter>
   <parameter name="transport.vfs.ActionAfterProcess">MOVE</parameter>
   <parameter name="transport.vfs.FileURI">file:///opt/wso2/transporteEDI/input/edi</parameter>
   <parameter name="transport.vfs.MoveAfterProcess">file:///opt/wso2/transporteEDI/backup/edi</parameter>
   <parameter name="transport.vfs.MoveAfterFailure">file:///opt/wso2/transporteEDI/failed/edi</parameter>
   <parameter name="transport.vfs.FileNamePattern">.*.(e|E)(d|D)(i|I)</parameter>
   <parameter name="transport.vfs.ContentType">application/xml</parameter>
   <parameter name="transport.vfs.ActionAfterFailure">MOVE</parameter>
   <parameter name="serviceType">Transform</parameter>
   <parameter name="transport.vfs.MoveTimestampFormat">yyyyMMdd-HHmmss_</parameter>
</proxy>
